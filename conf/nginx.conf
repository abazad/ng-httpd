# This file is auto generated - all your changes could be lost
# Please put your adjustments into separate .conf file(s) under "extra" subdir

user apache;
events {
	worker_connections 1024;
}
http {
	include		mime.types;
	default_type	application/octet-stream;

	log_format	main	'$remote_addr - $remote_user [$time_local] $host $request '
				'"$status" $body_bytes_sent "$http_referer" "$http_user_agent" '
				'"$http_x_forwarded_for" "$upstream_response_time"';

	log_format	domain	'$remote_addr - $remote_user [$time_local] "$request" $status '
				'$body_bytes_sent "$http_referer" "$http_user_agent" "$http_x_forwarded_for"';

	log_format	bytes	'$body_bytes_sent';

	access_log	logs/access.log main;

	server_tokens off;

	sendfile on;
	keepalive_timeout 30;
	client_max_body_size 100m;
	reset_timedout_connection on;
	server_names_hash_bucket_size 64;

	limit_zone	conz $host_raddr 16m;
	# Allow max 4 clients per IP, 4 requests per client
	limit_req_zone	$host_raddr zone=reqz:16m rate=16r/s;

	gzip		on;
	gzip_types	text/plain text/css application/javascript;

	include extra/*.conf;
	include vhost/*.conf;
}
